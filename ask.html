<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Assistant</title>

  <link rel="stylesheet" href="/paw-ui.css">
</head>

<body>
  <div class="app">
    <div class="frame">
      <div class="panel">

        <!-- TOP BAR (match listing tool UI) -->
        <div class="panel-topbar">
          <div class="topbar-row1">
            <div class="topbar-left">
              <!-- Intentionally blank for Assistant (keeps layout consistent across tools) -->
            </div>

            <div class="topbar-right">
              <div class="utility-pair" role="group" aria-label="Tool utilities">
                <button id="reset" class="util-btn" type="button">Reset</button>
                <button id="tips" class="util-btn" type="button">Tips &amp; How To</button>
              </div>
            </div>
          </div>
        </div>

        <div id="messages" class="messages"></div>

        <div class="composer">
          <textarea id="input" placeholder="How can I assist you today?"></textarea>
          <button id="send" class="send" aria-label="Send" type="button">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M12 5l7 7-1.4 1.4L13 8.8V20h-2V8.8L6.4 13.4 5 12l7-7z" fill="currentColor"/>
            </svg>
          </button>
        </div>

      </div>
    </div>
  </div>

  <script src="/tool-shell.js"></script>

  <script>
    (function () {
      const API_ENDPOINT = "https://paw-api.joe-b40.workers.dev";

      const DISCLAIMER_TEXT =
        "Important: This assistant provides guidance intended to be compliant with Fair Housing, MLS rules, and general legal standards. It is NOT a substitute for your own knowledge, broker guidance, or legal advice, and compliance cannot be guaranteed.";

      const TIPS_TEXT =
`How to use this assistant
• Ask questions in plain English — like you would ask a knowledgeable colleague
• Paste an email, text, or draft and tell me what you want it to sound like (shorter, warmer, more professional, etc.)
• Use it to think through next steps, messaging, objections, or client situations
• If you’re unsure what tool to use, ask — I’ll point you to the right one

Good to know
• I’ll keep responses practical and ready to use
• If details are missing, I’ll either ask one quick question or make conservative assumptions and label them

Compliance note
${DISCLAIMER_TEXT}`;

      const DISCLAIMER_TRIGGER = /(offer|contract|addendum|inspection|escrow|closing|tenant|landlord|lease|rent|hoa|mls|broker|commission|referral|agency|disclosure|fair housing|compliance|legal|attorney|lien|title|short sale|rezen|transaction)/i;

      window.PAWToolShell.init({
        apiEndpoint: API_ENDPOINT,
        toolId: "", // generic assistant route
        inputPlaceholder: "How can I assist you today?",
        tipsText: TIPS_TEXT,

        // Uses the current tool-shell.js disclaimer mechanism
        enableDisclaimer: true,
        disclaimerTrigger: DISCLAIMER_TRIGGER,
        getDisclaimerText: () => DISCLAIMER_TEXT,

        sendHistoryItems: 10,
        maxHistoryItems: 20,

        // Keep deliverable output card off for general assistant
        deliverableMode: false
      });
    })();
  </script>
</body>
</html>
