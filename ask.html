<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Assistant</title>

  <!--
    NOTE: paw-ui.css is SHARED across tools.
    Keep header markup consistent:
    panel-topbar > topbar-row0 > tool-head + topbar-right (utility-pair).
    Changing shared classes affects multiple tools.
  -->
  <link rel="stylesheet" href="./paw-ui.css">
</head>

<body>
  <div class="app">
    <div class="frame">
      <div class="panel">

        <div class="panel-topbar">
          <div class="topbar-row0">
            <div class="tool-head">
                            <div class="tool-subtitle">Quick answers, rewrites, and next steps.</div>
            </div>

            <div class="topbar-right">
              <div class="utility-pair" role="group" aria-label="Tool utilities">
                <button id="reset" class="util-btn" type="button">Reset</button>
                <button id="tips" class="util-btn" type="button">Tips &amp; How To</button>
              </div>
            </div>
          </div>
        </div>

        <div id="messages" class="messages"></div>

        <div class="composer">
          <textarea id="input" placeholder="How can I assist you today?"></textarea>
          <button id="send" class="send" aria-label="Send" type="button">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M12 5l7 7-1.4 1.4L13 8.8V20h-2V8.8L6.4 13.4 5 12l7-7z" fill="currentColor"/>
            </svg>
          </button>
        </div>

      </div>
    </div>
  </div>

  <script src="./tool-shell.js"></script>

  <script>
    (function () {
      const API_ENDPOINT = "https://paw-api.joe-b40.workers.dev";

      const DISCLAIMER_TEXT =
        "Important: This assistant provides guidance intended to support your work. It is not brokerage policy guidance, legal advice, and compliance cannot be guaranteed.";

      const DISCLAIMER_TRIGGER =
        /(fair housing|mls|compliance|legal|law|attorney|contract|offer|addendum|inspection|lien|title|short sale|agency|disclosure)/i;

      const TIPS_TEXT =
`How to use this assistant
• Ask questions in plain English
• Paste an email, text, or draft and tell me what you want it to sound like
• Use it to think through next steps, messaging, objections, or client situations
• Use this as a thinking partner — final judgment always stays with you`;

      window.PAWToolShell.init({
        apiEndpoint: API_ENDPOINT,
        toolId: "assistant",
        inputPlaceholder: "How can I assist you today?",
        tipsText: TIPS_TEXT,

        // One-time compliance note (shown only when trigger words appear in the user message)
        complianceNoteText: DISCLAIMER_TEXT,
        complianceTrigger: DISCLAIMER_TRIGGER,

        sendHistoryItems: 10,
        maxHistoryItems: 20,
        deliverableMode: false
      });
    })();
  </script>
</body>
</html>
